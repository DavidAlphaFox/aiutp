## 项目常识和上下文
- 每个会话前总是读取 `PLANNING.md`，来理解项目的架构，目标和代码规范
- 在开始新的任务前检查`TASK.md`，如何当前任务并没有被列出来，将该任务添加到列表中，并进行简述，同时记录当天日期


## 任务管理

### 使用TodoWrite工具
- **复杂任务**: 必须使用TodoWrite进行任务分解
- **状态跟踪**: 及时更新任务状态 (pending → in_progress → completed)
- **任务粒度**: 每个任务应该在1-2小时内完成

### 任务完成及发现
- **在`TASK.md`中标记完成的任务** 任务完成完成后立即标记。
- 在开发过程中发现的新子任务或待办事项，请添加到 `TASK.md` 的“发现的工作”部分。


## 文档
- **更新 `README.md`** 当添加新功能、依赖项发生变化或修改安装步骤时。
- **功能设计**: [docs/requirements/features/](./docs/requirements/features/) - 详细功能设计的目录
- **决策文档**: [docs/requirements/decisions/](./docs/requirements/decisions/) - 该目录下存放着决策文件，其中包含详细决策，实施总结，决策清单和快速预览，每个决策文件的文件名称，都要包含决策时间，精确到日。
- **开发规范**: [docs/development/](./docs/development/) - 该目录为代码开发规范存放位置
- **开发报告**: [docs/report/](./docs/report/) - 该目录为报告目录，用于存储报告文件
- **任务报告**: [docs/tasks/](./docs/tasks/) - 该目录为`TASK.md`中已经完成的任务，按照日期进行编号保存

### 代码结构和模块化
- **使用清晰的引用** 倾向使用相对引用
- **为不明显的代码添加注释**，确保所有内容对中级开发者都易于理解。
- 在编写复杂逻辑时，**添加内联 `Reason:` 注释**，解释原因，而不仅仅是说明做了什么。

### TDD 开发要求

本项目采用 **TDD (测试驱动开发)** 模式，所有新功能必须遵循 **Red-Green-Refactor** 循环：

1. **Red (红灯)**: 先编写失败的测试用例
   - 明确定义期望的行为
   - 运行测试确认失败

2. **Green (绿灯)**: 编写最小实现代码
   - 只写刚好让测试通过的代码
   - 不做过度设计

3. **Refactor (重构)**: 优化代码结构
   - 消除重复
   - 保持测试通过

#### TDD 开发流程
```
编写测试 → 运行测试(失败) → 实现代码 → 运行测试(通过) → 重构 → 运行测试(通过)
```

#### TDD 规则
- **测试先行**: 功能代码之前必须有对应的测试
- **小步前进**: 每次只添加一个测试用例
- **持续验证**: 每次修改后都要运行测试
- **核心功能100%覆盖**: 关键功能必须有完整测试

详细的 TDD 工作流程请参考 [开发规范](./docs/development/coding-standards.md)


## 参与专家
- **Erlang专家**： 一位专精Erlang开发的专家，对OTP 28，网络协议，安全协议，纠错算法有这深刻的理解
- **项目专家**： 专门负责用户需求分析，文档管理、更新和优化的项目管理专家

## 专家注意事项
- **需求文档管理**: 项目专家负责维护[docs/requirements/](./docs/requirements)下所有需求特性的文档，所有功能开发前需要确认需求文档，开发完成后需要更新实现状态
- **跨团队协作**: 开发过程中遇到需求不明确或需要变更时，应该及时与项目专家沟通，确保需求变更得到正确记录和评估
- **文档路径**: 我们的文档都使用相对路径，文档的最顶层目录是[docs](./docs)。但[README.md](./README.md)文件除外。

## AI行为准则
- **永远不要假设上下文缺失。如果不确定，请提问。**： 在不确定该如何处理是，要及时进行询问，而不是盲目猜测，必要时候开启plan mode
- **永远不要虚构库和函数**： 只使用已经知道的依赖
- **始终确认文件路径和模块名称**： 在代码或测试中引用它们之前先确保它们存在。
- **绝不删除或覆盖已有代码**： 除非有明确指示或作为 `TASK.md` 中任务的一部分

> **注意**: 本文档会随着项目发展持续更新。开发过程中如发现规范需要调整，请及时更新此文档。
